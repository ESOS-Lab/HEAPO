//===                             main.h                                   ==//
//
//                     Application Memory Profiling Tool
//
//              Developed by System Design Methodology Laboratory
//                   Hanyang University, Seoul, South Korea
//
//===----------------------------------------------------------------------===//

#include "utils.h"

namespace profiletool
{
    
    extern int Profile_application(std::string InputFilename, std::string OutputFilename,int action,bool Convert_to_objectfile);
    extern int AppendArgs();
    extern void WrapAppMainFunction();
    extern Instruction *Pre_execution_processes(  );
    extern void Post_execution_processes( );
    extern void  ProcessBBmemaccesses();
    extern int Profile_unknown_memaccess();
    extern void Stack_registration_codes();
    extern void ReplaceMallocAndFree();
}

#define help___ "\
USAGE:  \"./profiletool filename.bc  \n\
        \"./profiletool -a n -i filename.bc -o filename.o [-obj]\"  \n\
options:  \n\
    -a      action  \n\
            -a=1  Heap variable profiling only (heap variables allocated with malloc)  \n\
            -a=2  Stack variable profiling only  \n\
            -a=3  Global variable only  \n\
            -a=4  All memory regions (Heap,Stack,Global)  \n\
            -a=6  generate .csv file from profile results  \n\
    -i      input filename  \n\
    -o      output filename  \n\
    -obj    convert output bitcode to object file  \n\
  \n\
Eg 1:  \n\
    modify your application to profile all memory region  \n\
    $ ./profiletool swaption.bc  \n\
  \n\
    compile the output file in previous command to executable  \n\
    $ g++ swaption.o -o swaption  \n\
  \n\
    execute the modified application  \n\
    $ ./swaption \n\
  \n\
    the results files \"result.tpl\" and \"result.csv\" will the generated by the application  \n\
  \n\
Eg 2:  \n\
    modify your application to profile heap memory region  \n\
    $ ./profiletool -a=1 -i swaption.bc -o swaption.o -obj   \n\
  \n\
    compile the output file in previous command to executable  \n\
    $ g++ swaption.o -o swaption  \n\
  \n\
    execute the modified application  \n\
    $ ./swaption \n\
  \n\
    the results files \"result.tpl\" and \"result.csv\" will the generated by the application "


 